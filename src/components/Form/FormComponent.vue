<template>
  <view>
    <wd-form ref="form" :model="model">
      <wd-cell-group border>
        <wd-input
          label="ç”¨æˆ·å"
          label-width="100px"
          prop="value1"
          clearable
          v-model="model.value1"
          placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
          :rules="[{ required: true, message: 'è¯·å¡«å†™ç”¨æˆ·å' }]"
        />
        <wd-input
          label="å¯†ç "
          label-width="100px"
          prop="value2"
          show-password
          clearable
          v-model="model.value2"
          placeholder="è¯·è¾“å…¥å¯†ç "
          :rules="[{ required: true, message: 'è¯·å¡«å†™å¯†ç ' }]"
        />
      </wd-cell-group>
      <view class="footer">
        <wd-button type="primary" size="large" @click="handleSubmit" block
          >æäº¤</wd-button
        >
      </view>
    </wd-form>
  </view>
</template>

<script lang="ts" setup>
import { reactive, ref } from 'vue'

// åŠ¨æ€æ¥æ”¶å‚æ•°ï¼Œé…åˆé’©å­è¿›è¡Œæ•°æ®æ§åˆ¶
// ç»Ÿä¸€ä½¿ç”¨è§„åˆ™
// ...
const model = reactive<{
  value1: string
  value2: string
}>({
  value1: '',
  value2: ''
})

const form = ref()

function handleSubmit() {
  form.value
    .validate()
    .then(({ valid, errors }) => {
      console.log('ğŸš€ ~ .then ~ errors:', errors)
      if (valid) {
        uni.showToast({ title: 'æäº¤æˆåŠŸ', icon: 'success' })
      }
    })
    .catch((error) => {
      console.log(error, 'error')
    })
}
</script>

<style lang="scss" scoped>
.footer {
  padding: 12px;
}
</style>
